# 파일 머지
***
하이브의 작업중 매퍼 단독 작업의 경우 파일이 많이 생성될 수 있습니다. 작은 사이즈의 파일이 많이 생성되면 HDFS에 부담이 될 수 있기 때문에 이때는 파일을 묶어주는 것이 좋습니다. 이때 이용하는 것이 머지 설정입니다.

파일 머지를 이용할 때 주의할 점은 너무 작은 사이즈의 파일이 많을 때 사용하면 작업시간이 길어질 수 있습니다. 예를 들어 1KB 사이즈의 파일 3000개를 256MB 사이즈로 묶는 머지 작업을 추가하면 시간이 오래 걸릴 수 있습니다. 사용할 때 주의해서 사용해야 합니다.

```
-- 맵퍼 단독 작업일 때 머지 
set hive.merge.mapfiles=true;
-- 맵리듀스 작업일 때 머지 
set hive.merge.mapredfiles=true;
-- 테즈 작업일 때 머지 
set hive.merge.tezfiles=true;
-- 머지 작업의 대상이 되는 파일 사이즈(32MB이하)
set hive.merge.smallfiles.avgsize=32000000;
-- 머지 파일을 묶을때 기준(256MB)
set hive.merge.size.per.task=256000000;
```
